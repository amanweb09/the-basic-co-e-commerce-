<html>

<head>
    <%- include('../partials/head.ejs') %>
        <title>Checkout - The Basic Company</title>
</head>

<body>
    <div class="container mx-auto">
        <%- include('../partials/navbar.ejs') %>
            <div>
                <div class="w-full h-20 flex items-center justify-center sm:my-8 my-6">
                    <div class="sm:w-14 sm:h-14 w-12 h-12 step_badge active rounded-full flex-center font-bold text-lg">
                        <img class="sm:h-10 h-6" alt="address"
                            src="https://img.icons8.com/ios/50/EBEBEB/marker--v1.png" />
                    </div>
                    <div
                        class="sm:w-14 sm:h-14 w-12 h-12 step_badge steps sm:mx-64 mx-20 rounded-full flex-center font-bold text-lg">
                        <img class="sm:h-10 h-6" alt="payment"
                            src="https://img.icons8.com/ios/50/EBEBEB/card-security.png" />
                    </div>
                    <div class="sm:w-14 sm:h-14 w-12 h-12 step_badge steps rounded-full flex-center font-bold text-lg">
                        <img class="sm:h-10 h-6" alt="placed"
                            src="https://img.icons8.com/ios/50/EBEBEB/checkmark--v1.png" />
                    </div>

                </div>
                <div>
                    <% if (err.length) {%>
                        <div class="bg-red-200 w-10/12 block mx-auto text-center py-2">
                            <%= err %>
                        </div>
                        <% } else if (success.length) {%>
                            <div class="bg-green-200 w-10/12 block mx-auto text-center py-2">
                                <%= success %>
                            </div>
                            <% } %>
                </div>
                <div class="flex justify-center sm:flex-row flex-col">
                    <div class="sm:w-3/4 w-full px-4 sm:px-0 mb-10 sm:mb-0">
                        <h1 class="font-extrabold text-xl sm:mt-4 mt-6">Shipping Address</h1>
                        <p class="text-gray-500 text-sm mt-2 mb-6 sm:mb-0">Enter the address where you want us to
                            deliver your products.
                        </p>
                        <div id="local_address_container" style="border: 1px solid #dcdcdc;"
                            class="w-max hidden flex items-center py-4 pr-4 my-4 rounded-lg">
                            <div>
                                <img class="h-10 mx-2" src="https://img.icons8.com/dotty/80/000000/order-delivered.png"
                                    alt="address">
                            </div>
                            <form id="existing_address_form" action="/checkout" method="POST">
                                <div class="mx-4">
                                    <p class="break-all capitalize" id="existing_address_container"></p>
                                    <button id="use_this_address_btn"
                                        class="bg-red-500 hover:bg-red-600 py-2 px-4 mt-2 font-bold text-white block">
                                        Use This Address
                                    </button>
                                </div>
                            </form>
                        </div>

                        <button id="add_new_address_btn"
                            class="bg-purple-500 hover:bg-purple-600 w-80 py-2 px-4 mt-4 my-8 text-white font-bold">
                            <span class="text-xl">&plus;</span>
                            ADD NEW ADDRESS
                        </button>
                        <form method="POST" action="/checkout" id="address_form" class="sm:mt-8">
                            <label for="add_1">Customer's Name <span class="text-red-500">*</span></label>
                            <input name="name" placeholder="Full name here"
                                class="sm:w-9/12 w-11/12 h-10 block border-b-2 border-b-solid border-b-orange-200 focus:border-pink-500"
                                type="text">
                            <label class="mt-6 block" for="add_1">Contact Number <span
                                    class="text-red-500">*</span></label>
                            <input name="tel" placeholder="Telephone number"
                                class="sm:w-9/12 w-11/12 h-10 block border-b-2 border-b-solid border-b-orange-200 focus:border-pink-500"
                                type="text">
                            <label class="mt-6 block" for="add_1">Address Line 1 <span
                                    class="text-red-500">*</span></label>
                            <input name="addressLine1" placeholder="Building, location, area ..."
                                class="sm:w-9/12 w-11/12 h-10 block border-b-2 border-b-solid border-b-orange-200 focus:border-pink-500"
                                type="text">

                            <label class="mt-6 block" for="add_1">Address Line 2 <span
                                    class="text-red-500">*</span></label>
                            <input name="addressLine2" placeholder="Floor, street ..."
                                class="sm:w-9/12 w-11/12 h-10 block border-b-2 border-b-solid border-b-orange-200 focus:border-pink-500"
                                type="text">

                            <label class="mt-6 block" for="add_1">Landmark<span class="text-red-500">*</span></label>
                            <input name="landmark" placeholder="Nearby location"
                                class="sm:w-9/12 w-11/12 h-10 block border-b-2 border-b-solid border-b-orange-200 focus:border-pink-500"
                                type="text">
                            <div class="flex items-center">
                                <div>
                                    <label class="mt-6 block" for="add_1">State <span
                                            class="text-red-500">*</span></label>
                                    <input name="state" placeholder="State"
                                        class="w-11/12 h-10 block border-b-2 border-b-solid border-b-orange-200 focus:border-pink-500"
                                        type="text">
                                </div>
                                <div>
                                    <label class="mt-6 block" for="add_1">PIN Code <span
                                            class="text-red-500">*</span></label>
                                    <input name="pin" placeholder="PIN code"
                                        class="w-11/12 h-10 block border-b-2 border-b-solid border-b-orange-200 focus:border-pink-500"
                                        type="text">
                                </div>
                            </div>
                            <label class="mt-6 block" for="add_1">Country <span class="text-red-500">*</span></label>
                            <input name="country" placeholder="Country"
                                class="w-9/12 h-10 block border-b-2 border-b-solid border-b-orange-200 focus:border-pink-500"
                                type="text">
                            <button id="continue_to_payment_btn"
                                class="bg-black hover:bg-orange-600 mt-6 text-white sm:w-1/3 w-2/3 h-12 block mx-auto font-bold flex-box"
                                type="submit">
                                <img class="h-4 inline-block" alt="lock"
                                    src="https://img.icons8.com/ios-glyphs/30/FFFFFF/lock--v1.png" />
                                <span>Continue to Payment</span>
                            </button>
                        </form>
                    </div>
                    <div class="sm:w-1/4 hidden sm:block">
                        <img class="mx-auto block w-full" src="/images/address.png" alt="address">
                    </div>
                </div>
            </div>

            <script src="/js/app.js"></script>
            <script>
                const existingAddressContainer = document.getElementById('existing_address_container')
                const address = window.localStorage.getItem('address')
                existingAddressContainer.innerText = JSON.parse(address).address

            </script>
</body>

</html>