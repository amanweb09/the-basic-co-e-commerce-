<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head.ejs') %>
        <title>Products - The Basic Co.</title>
</head>

<body>
    <%- include('../partials/navbar.ejs') %>
        <div class="container mx-auto flex-center flex-col">
            <div class="flex-center flex-col mb-4">
                <img class="w-9/12 my-4 main_image" src="/images/model.jpg" alt="product">

                <div class="w-9/12 h-16 flex-center overflow-x-scroll slide-wrapper">
                    <img class="max-h-16 mx-2 slide-img" src="/images/model.jpg" alt="product image">
                    <img class="max-h-16 mx-2 slide-img" src="/images/gift.png" alt="product image">
                    <img class="max-h-16 mx-2 slide-img" src="/images/search.png" alt="product image">
                </div>
            </div>

            <div class="w-full px-4 mt-6">
                <h1 class="font-bold text-xl capitalize">
                    <%= product.title %>
                </h1>
                <p class=" text-gray-600 text-sm mt-4 capitalize">
                    <%= product.desc %>
                </p>
                <span class="font-bold text-orange-500 text-xl my-4 block">&#8377;<%= product.price %></span>
            </div>

            <div class="w-full px-4">
                <span class="text-gray-600 font-bold text-sm block mb-2 mt-4">Select a Color</span>
                <div class="w-full flex py-2">
                    <% product.variants.colors.map((color)=> { %>
                        <div id="<%= color %>" class="w-10 h-10 color-badge rounded-full mx-2 bg-red-600"></div>
                        <% }) %>
                </div>

                <span class="text-gray-600 font-bold text-sm block mb-2 mt-4">Select a Size</span>
                <div class="w-full flex py-2">
                    <div class="h-12 w-10 flex-center mx-2 rounded-xl text-gray-600 size-badge">S</div>
                    <div class="h-12 w-10 flex-center mx-2 rounded-xl text-gray-600 size-badge">M</div>
                    <div class="h-12 w-10 flex-center mx-2 rounded-xl text-gray-600 size-badge">L</div>
                    <div class="h-12 w-10 flex-center mx-2 rounded-xl text-gray-600 size-badge">XL</div>
                    <%# product.variants.sizes && product.variants.sizes.map((size)=> { %>
                        <!-- <div id="<%# size %>" class="w-10 h-10 rounded-xl"><%# size %></div> -->
                        <%# }) %>
                </div>
            </div>

            <div class="flex-center w-full px-2 my-4">
                <button id="add_to_cart_btn" data-product="<%= product %>"
                    class="flex-1 mr-4 font-bold bg-orange-400 h-12">ADD TO CART</button>
            </div>

        </div>

        <script>
            const slides = document.querySelectorAll('.slide-img')
            const main_image = document.querySelector('.main_image')

            slides.forEach((slide) => {

                slide.addEventListener('click', () => {

                    let secSrc = slide.getAttribute('src')
                    main_image.setAttribute('src', secSrc)
                })
            })

            const productString = document
                .querySelector('button#add_to_cart_btn')
                .getAttribute('data-product')
            
            const product = JSON.parse(productString)
            console.log(product);
        </script>
</body>

</html>